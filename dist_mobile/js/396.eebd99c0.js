(self["webpackChunkh5_amiya"]=self["webpackChunkh5_amiya"]||[]).push([[396],{396:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content",style:{height:e.list.length<4?"100vh":"auto"}},[t("div",{staticClass:"search_content"},[t("van-field",{staticClass:"search",attrs:{placeholder:"请输入关键字"},on:{input:e.blurInput},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),t("div",{staticClass:"calendar_con",on:{click:e.calendarClick}},[t("i",{staticClass:"iconfont icon-rili search_icon"}),t("div",[t("div",{staticClass:"calendar_name"},[e._v(e._s(e.query.startDate))]),t("div",{staticClass:"calendar_name"},[e._v(e._s(e.query.endDate))])])]),t("i",{staticClass:"iconfont icon-icon-sousu search_icon",on:{click:e.handleSearch}})],1),t("van-calendar",{attrs:{color:"#1989fa","min-date":e.minDate,"max-date":e.maxDate,type:"range"},on:{confirm:e.onConfirm},model:{value:e.calendarModel,callback:function(t){e.calendarModel=t},expression:"calendarModel"}}),t("div",{staticClass:"list_wrap"},[t("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载",error:e.error},on:{load:e.onLoad,"update:error":function(t){e.error=t}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("div",[e._l(e.list,(function(a,o){return t("van-swipe-cell",{key:o,scopedSlots:e._u([{key:"right",fn:function(){return[t("van-button",{attrs:{square:"",color:"linear-gradient(to bottom, #8ab4fe,#5492FE)",text:"派单"},on:{click:function(t){return e.dispatchClick(a.orderId)}}}),t("van-button",{attrs:{square:"",color:"linear-gradient(to bottom, #8ab4fe,#5492FE)",text:"详情"},on:{click:function(t){return e.detailClick(a.orderId)}}})]},proxy:!0}],null,!0)},[t("div",{staticClass:"item"},[t("div",{staticClass:"item_con"}),t("div",{staticClass:"item_top"},[t("div",{staticStyle:{color:"#000"}},[e._v("订单："),t("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.orderId,expression:"item.orderId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}]},[e._v(e._s(a.orderId))])])]),t("div",{staticClass:"item_center"},[t("van-image",{staticStyle:{margin:"0 8px 0 0"},attrs:{width:"50",height:"50",src:a.thumbPictureUrl}}),t("div",{staticClass:"item_right"},[t("div",{staticClass:"hospital_con"},[e._v("客户："),t("div",{staticClass:"hospital"},[e._v(e._s(a.customerName))])]),t("div",{staticClass:"right_content"},[t("div",[e._v("手机："+e._s(a.phone))])]),t("div",{staticClass:"hospital_con"},[e._v("预约门店："),t("div",{staticClass:"hospital"},[e._v(e._s(a.appointmentHospital))])]),t("div",{staticClass:"right_content"},[t("div",[e._v("面诊："+e._s(a.consultationTypeText))]),t("div",{staticClass:"ip_con"},[e._v("主播IP："),t("span",{staticClass:"ip"},[e._v(e._s(a.liveAnchorName))])])])])],1)])])})),t("van-popup",{staticClass:"dispatch_content",attrs:{position:"bottom",round:"","close-on-click-overlay":!1},model:{value:e.dispatchModel,callback:function(t){e.dispatchModel=t},expression:"dispatchModel"}},[t("van-field",{staticClass:"customer_content",attrs:{label:"派单医院",disabled:"",placeholder:"请选择派单医院"},on:{click:function(t){e.hospitalIdModel=!0}},model:{value:e.form.hospitalName,callback:function(t){e.$set(e.form,"hospitalName",t)},expression:"form.hospitalName"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"派单人员",disabled:"",placeholder:"请选择派单人员"},on:{click:function(t){e.sendByModel=!0}},model:{value:e.form.sendByName,callback:function(t){e.$set(e.form,"sendByName",t)},expression:"form.sendByName"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"派单留言",placeholder:"请输入派单留言",type:"textarea",rows:4},on:{input:e.remarkInput},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}}),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"default"},on:{click:e.cancel}},[e._v("取消")]),t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.submite}},[e._v("确认")])],1)],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.hospitalIdModel,callback:function(t){e.hospitalIdModel=t},expression:"hospitalIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.searchColumns},on:{cancel:function(t){e.hospitalIdModel=!1},confirm:e.hospitalIdConfirm},scopedSlots:e._u([{key:"title",fn:function(){return[t("van-field",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入医院进行搜索",clearable:""},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})]},proxy:!0}])})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.sendByModel,callback:function(t){e.sendByModel=t},expression:"sendByModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.searchColumns2},on:{cancel:function(t){e.sendByModel=!1},confirm:e.sendByConfirm},scopedSlots:e._u([{key:"title",fn:function(){return[t("van-field",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入派单人员进行搜索",clearable:""},model:{value:e.searchKey2,callback:function(t){e.searchKey2=t},expression:"searchKey2"}})]},proxy:!0}])})],1)],2)])],1),t("detail")],1)},s=[],i=(a(7658),a(7535)),n=a(4337),r={components:{detail:n["default"]},inject:["reload"],data(){return{searchKey:"",searchColumns:[],searchKey2:"",searchColumns2:[],calendarModel:!1,minDate:new Date(2020,1,1),maxDate:new Date(2024,1,1),query:{pageNum:1,pageSize:10,totalCount:0,keyword:"",startDate:sessionStorage.getItem("nodis_startDate")?sessionStorage.getItem("nodis_startDate"):this.$moment().startOf("month").format("YYYY-MM-DD"),endDate:sessionStorage.getItem("nodis_endDate")?sessionStorage.getItem("nodis_endDate"):this.$moment(new Date).format("YYYY-MM-DD")},list:[],loading:!1,finished:!1,error:!1,startDate:"",endDate:"",dispatchModel:!1,form:{hospitalId:null,hospitalName:null,orderId:"",isUncertainDate:!1,appointmentDate:"",remark:"",sendBy:null,sendByName:""},hospitalIdModel:!1,hospitalName:[],sendByModel:!1,sendByName:[],scrollTop:0}},methods:{calendarClick(){this.calendarModel=!0},dispatchClick(e){this.dispatchModel=!0,this.form.orderId=e},cancel(){this.form={},this.dispatchModel=!1},submite(){const{hospitalId:e,sendBy:t,orderId:a,remark:o}=this.form;if(!e)return void this.$toast("请选择派单医院");if(!t)return void this.$toast("请选择派单人员");const s={orderId:a,hospitalId:Number(e),sendBy:Number(t),remark:o,isUncertainDate:!1,appointmentDate:null};i.a9(s).then((e=>{0===e.code?(this.$toast("派单成功"),this.form={},this.dispatchModel=!1,this.getunContentPlatFormSendOrderList()):this.$toast(e.msg)}))},detailClick(e){i.ju(e).then((e=>{0===e.code?this.$router.push({path:"/detail",query:{orderInfo:e.data.orderInfo}}):this.$toast(e.msg)}))},getHospitalInfo(){i.a3().then((e=>{this.hospitalInfo=e.data.hospitalInfo;let t=[];this.hospitalInfo.map((e=>{t.push(e.name)})),this.hospitalName=t,this.searchColumns=t}))},getCustomerServiceNameList(){i.nj().then((e=>{this.employee=e.data.employee;let t=[];this.employee.map((e=>{t.push(e.name)})),this.sendByName=t,this.searchColumns2=t}))},hospitalIdConfirm(e){this.form.hospitalName=e,this.hospitalIdModel=!1,this.searchKey="",this.searchColumns=[],this.hospitalInfo.map((t=>{t.name==e&&(this.form.hospitalId=t.id)}))},sendByConfirm(e){this.form.sendByName=e,this.sendByModel=!1,this.searchKey2="",this.searchColumns2=[],this.employee.map((t=>{t.name==e&&(this.form.sendBy=t.id)}))},remarkInput(e){this.form.remark=e},onCopySuccess(){this.$toast("复制成功")},onConfirm(e){this.query.startDate=this.$moment(e[0]).format("YYYY-MM-DD"),this.query.endDate=this.$moment(e[1]).format("YYYY-MM-DD"),sessionStorage.setItem("nodis_startDate",this.query.startDate),sessionStorage.setItem("nodis_endDate",this.query.endDate),this.calendarModel=!1,this.query.pageNum=1},blurInput(e){this.query.keyword=e},handleSearch(){this.list=[],this.query.pageNum=1,this.finished=!1,this.loading=!0,this.onLoad()},getunContentPlatFormSendOrderList(){return new Promise((e=>{const{pageNum:t,pageSize:a,keyword:o,startDate:s,endDate:n}=this.query,r={startDate:s||null,endDate:n||null,keyword:o,pageNum:t,pageSize:a,liveAnchorId:null,consultationEmpId:null,contentPlateFormId:"",employeeId:-1,orderStatus:null,orderSource:-1};i.zo(r).then((t=>{if(0===t.code){const{list:a,totalCount:o}=t.data.unSendOrder;this.list=[...this.list,...a],this.query.pageNum++,this.loading=!1,this.list.length===o&&(this.finished=!0),e()}})).catch((()=>{this.error=!0}))}))},onLoad(){sessionStorage.getItem("noDispatchPageNum")&&sessionStorage.getItem("noDispatchScrollTop")||this.getunContentPlatFormSendOrderList()},handleScroll(){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},async handleReturnScroll(){let e=sessionStorage.getItem("noDispatchScrollTop"),t=sessionStorage.getItem("noDispatchPageNum");for(let a=1;a<t;a++)await this.getunContentPlatFormSendOrderList();this.$nextTick((()=>{document.documentElement.scrollTop=Number(e),sessionStorage.removeItem("noDispatchScrollTop"),sessionStorage.removeItem("noDispatchPageNum")}))}},beforeRouteEnter(e,t,a){"/dispatchList"===t.path&&(sessionStorage.removeItem("noDispatchScrollTop"),sessionStorage.removeItem("noDispatchPageNum"),sessionStorage.removeItem("nodis_startDate"),sessionStorage.removeItem("nodis_endDate")),a()},async mounted(){this.handleReturnScroll(),window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)},destroyed(){sessionStorage.setItem("noDispatchScrollTop",this.scrollTop),sessionStorage.setItem("noDispatchPageNum",this.query.pageNum)},created(){this.getHospitalInfo(),this.getCustomerServiceNameList()},watch:{searchKey:function(){let e=String(this.searchKey);e=e.replace(/\s*/g,"");const t=new RegExp(e,"ig");this.searchColumns=this.hospitalName.filter((e=>null!=e.match(t)))},searchKey2:function(){let e=String(this.searchKey2);e=e.replace(/\s*/g,"");const t=new RegExp(e,"ig");this.searchColumns2=this.sendByName.filter((e=>null!=e.match(t)))}}},l=r,c=(a(6597),a(1001)),d=(0,c.Z)(l,o,s,!1,null,"2206be3e",null),m=d.exports},503:function(e,t,a){"use strict";a.r(t);var o=a(8081),s=a.n(o),i=a(3645),n=a.n(i),r=a(1667),l=a.n(r),c=new URL(a(1132),a.b),d=n()(s()),m=l()(c);d.push([e.id,".content[data-v-2206be3e]{background:#c7dbff;width:100%}[data-v-2206be3e] .van-swipe-cell__right{display:flex;flex-direction:column;align-items:center;justify-content:center}.van-button--info[data-v-2206be3e],.van-button--normal[data-v-2206be3e],.van-button--square[data-v-2206be3e],[data-v-2206be3e] .van-button{margin:5px 0}.dispatch_content[data-v-2206be3e]{height:43%;color:#5492fe}.customer_content[data-v-2206be3e]{width:90%;margin:0 auto;border-bottom:1px solid #bbd3ff;padding:10px 0;box-sizing:border-box}.customer_content .van-field__label[data-v-2206be3e],.customer_content[data-v-2206be3e] .van-cell__title{width:70px;color:#5492fe}.search_content[data-v-2206be3e]{width:100%;height:55px;position:fixed;top:0;left:0;z-index:99;background:#8ab4fe;display:flex;justify-content:space-between;padding:0 15px;align-items:center}.search_content .search_icon[data-v-2206be3e]{font-size:28px;color:#fff}.search_content .calendar_name[data-v-2206be3e]{font-size:12px;color:#fff;margin-left:5px}.search_content .calendar_con[data-v-2206be3e]{width:120px;display:flex;align-items:center;margin-left:5px}.search[data-v-2206be3e]{width:60%;height:35px;line-height:35px;background:#f5f5f5;border-radius:10px;border:none;padding:0 10px}.search_icon[data-v-2206be3e]{font-size:25px;color:#fff}.list_wrap[data-v-2206be3e]{margin-top:55px}.list_wrap .item_con[data-v-2206be3e]{background-image:url("+m+");background-size:100% 100%;background-repeat:no-repeat;position:fixed;right:20px;top:25px;width:90px;height:70px}.list_wrap .item[data-v-2206be3e]{width:96%;background:#e9f3ff;border-radius:10px;margin:15px auto 0;color:#565151;font-size:13px;padding:10px;box-sizing:border-box}.list_wrap .item .item_top[data-v-2206be3e]{display:flex;justify-content:space-between}.list_wrap .item .item_top .copy[data-v-2206be3e]{background:#f5f5f5;border-radius:10px;padding:0 6px;box-sizing:border-box;color:#5492fe}.list_wrap .item .item_top .item_type[data-v-2206be3e]{color:#5492fe}.list_wrap .item .item_center[data-v-2206be3e]{width:100%;display:flex;justify-content:space-between;align-items:center;margin:7px 0}.list_wrap .item .item_center .item_right[data-v-2206be3e]{width:100%;flex:1}.list_wrap .item .item_center .item_right .right_content[data-v-2206be3e]{display:flex;justify-content:space-between;align-items:center}.list_wrap .item .item_center .item_right .right_content .nickname_con[data-v-2206be3e]{display:flex}.list_wrap .item .item_center .item_right .right_content .nickname_con .nickname[data-v-2206be3e]{width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list_wrap .item .item_center .item_right .right_content .ip_con[data-v-2206be3e]{margin-left:10px;display:flex}.list_wrap .item .item_center .item_right .right_content .ip_con .ip[data-v-2206be3e]{width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list_wrap .item .item_center .hospital_con[data-v-2206be3e]{display:flex}.list_wrap .item .item_center .hospital_con .hospital[data-v-2206be3e]{width:70%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list_wrap .item .item_bottom[data-v-2206be3e]{display:flex;justify-content:space-between}.list_wrap .item .item_bottom .nickname_con[data-v-2206be3e]{display:flex}.list_wrap .item .item_bottom .nickname_con .nickname[data-v-2206be3e]{width:130px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list_wrap .nodata[data-v-2206be3e]{display:flex;text-align:center}.bottom[data-v-2206be3e]{display:flex;margin-top:20px}.bottom .button[data-v-2206be3e]{width:40%;height:42px;margin:0 auto}",""]),t["default"]=d},6597:function(e,t,a){var o=a(503);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(4402).Z;s("26cd4644",o,!0,{sourceMap:!1,shadowMode:!1})},1132:function(e){"use strict";e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=396.eebd99c0.js.map