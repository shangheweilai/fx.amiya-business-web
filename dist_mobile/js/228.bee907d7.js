(self["webpackChunkh5_amiya"]=self["webpackChunkh5_amiya"]||[]).push([[228],{9228:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return T}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"step_con"},[t("van-steps",{staticStyle:{"border-radius":"10px"},attrs:{active:e.active,"active-color":"#5492FE"}},[t("van-step",[e._v("主播客服")]),t("van-step",[e._v("订单信息")]),t("van-step",[e._v("客户信息")]),t("van-step",[e._v("其他内容")])],1)],1),t("div",{staticClass:"content"},[0==e.active?t("anchorCustomerServiceMessage",{ref:"anchorCustomerServiceMessage",attrs:{active:e.active},on:{edidActive:e.edidActive}}):1==e.active?t("orderMessage",{ref:"anchorCustomerServiceMessage",attrs:{active:e.active},on:{edidActive2:e.edidActive2}}):2==e.active?t("customerMessage",{ref:"anchorCustomerServiceMessage",attrs:{active:e.active},on:{edidActive3:e.edidActive3}}):t("otherContents",{ref:"anchorCustomerServiceMessage",attrs:{active:e.active},on:{edidActive4:e.edidActive4}})],1)])},n=[],s=o(7535),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("div",{staticClass:"anchor"},[e._v("主播客服信息")]),t("div",[t("van-field",{staticClass:"customer_content",attrs:{label:"绑定客服",disabled:"",placeholder:"请选择绑定客服"},on:{click:e.belongEmpIdClick},model:{value:e.form.belongEmpId,callback:function(t){e.$set(e.form,"belongEmpId",t)},expression:"form.belongEmpId"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"主播平台",disabled:"",placeholder:"请选择主播平台"},on:{click:function(t){e.contentPlateFormIdModel=!0,e.form.liveAnchorId="",e.form2.liveAnchorId="",e.form.liveAnchorWeChatNo=null,e.form2.liveAnchorWeChatNo=null}},model:{value:e.form.contentPlateFormId,callback:function(t){e.$set(e.form,"contentPlateFormId",t)},expression:"form.contentPlateFormId"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"主播IP号",disabled:"",placeholder:"请选择主播IP号"},on:{click:e.liveAnchorIdClick},model:{value:e.form.liveAnchorId,callback:function(t){e.$set(e.form,"liveAnchorId",t)},expression:"form.liveAnchorId"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"主播微信号",disabled:"",placeholder:"请选择主播微信号"},on:{click:e.liveAnchorWeChatNoClick},model:{value:e.form.liveAnchorWeChatNo,callback:function(t){e.$set(e.form,"liveAnchorWeChatNo",t)},expression:"form.liveAnchorWeChatNo"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"科室",disabled:"",placeholder:"请选择科室"},on:{click:function(t){e.hospitalDepartmentIdModel=!0,e.form.goodsId=""}},model:{value:e.form.hospitalDepartmentId,callback:function(t){e.$set(e.form,"hospitalDepartmentId",t)},expression:"form.hospitalDepartmentId"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"需求",disabled:"",placeholder:"请选择需求"},on:{click:e.goodsIdClick},model:{value:e.form.goodsId,callback:function(t){e.$set(e.form,"goodsId",t)},expression:"form.goodsId"}})],1),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.nextStep}},[e._v("下一步")])],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.belongEmpIdModel,callback:function(t){e.belongEmpIdModel=t},expression:"belongEmpIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.serviceName},on:{cancel:function(t){e.belongEmpIdModel=!1},confirm:e.belongEmpIdConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.contentPlateFormIdModel,callback:function(t){e.contentPlateFormIdModel=t},expression:"contentPlateFormIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.terraceName},on:{cancel:function(t){e.contentPlateFormIdModel=!1},confirm:e.contentPlateFormIdConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.liveAnchorIdModel,callback:function(t){e.liveAnchorIdModel=t},expression:"liveAnchorIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.liveAnchorName},on:{cancel:function(t){e.liveAnchorIdModel=!1},confirm:e.liveAnchorIdConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.liveAnchorWeChatNoModel,callback:function(t){e.liveAnchorWeChatNoModel=t},expression:"liveAnchorWeChatNoModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.liveAnchorWeChatNoName},on:{cancel:function(t){e.liveAnchorWeChatNoModel=!1},confirm:e.liveAnchorWeChatNoConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.hospitalDepartmentIdModel,callback:function(t){e.hospitalDepartmentIdModel=t},expression:"hospitalDepartmentIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.hospitalDepartmentName},on:{cancel:function(t){e.hospitalDepartmentIdModel=!1},confirm:e.hospitalDepartmentIdConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.goodsIdModel,callback:function(t){e.goodsIdModel=t},expression:"goodsIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.goodsName},on:{cancel:function(t){e.goodsIdModel=!1},confirm:e.goodsIdConfirm}})],1)],1)},i=[],c=(o(7658),{props:{active:Number,message:Object},data(){return{form:{belongEmpId:null,contentPlateFormId:"",liveAnchorId:"",liveAnchorWeChatNo:"",hospitalDepartmentId:"",goodsId:""},form2:{belongEmpId:null,contentPlateFormId:"",liveAnchorId:"",liveAnchorWeChatNo:"",hospitalDepartmentId:"",goodsId:""},belongEmpIdModel:!1,contentPlateFormIdModel:!1,liveAnchorIdModel:!1,liveAnchorWeChatNoModel:!1,hospitalDepartmentIdModel:!1,goodsIdModel:!1,serviceName:[],terraceName:[],liveAnchorName:[],liveAnchorWeChatNoName:[],hospitalDepartmentName:[],goodsName:[],anchorCustomerServiceMessageParams:{serviceNameList:[],terraceList:[],LiveAnchorList:[],WechatList:[],departmentList:[],goodsList:[]}}},methods:{nextStep(){const{belongEmpId:e,contentPlateFormId:t,liveAnchorId:o,liveAnchorWeChatNo:r,hospitalDepartmentId:n,goodsId:s}=this.form2;e?t?o?r?n?s?(this.$emit("edidActive",{active:1,anchorCustomerServiceMessage:this.form2}),sessionStorage.setItem("anchorFormName",JSON.stringify(this.form)),sessionStorage.setItem("anchorFormId",JSON.stringify(this.form2))):this.$toast("请选择需求"):this.$toast("请选择科室"):this.$toast("请选择主播微信号"):this.$toast("请选择主播IP"):this.$toast("请选择主播平台"):this.$toast("请选择绑定客服")},contentPlateFormIdClick(){this.contentPlateFormIdModel=!0,this.form.liveanchorId="",this.form2.liveanchorId="",this.form.liveAnchorWeChatNo=null,this.form2.liveAnchorWeChatNo=null},liveAnchorIdClick(){this.form.contentPlateFormId?(this.liveAnchorIdModel=!0,this.form.liveAnchorWeChatNo=null,this.form2.liveAnchorWeChatNo=null,this.getLiveAnchor(this.form2.contentPlateFormId)):this.$toast("请先选择主播平台")},liveAnchorWeChatNoClick(){this.form.liveAnchorId?(this.liveAnchorWeChatNoModel=!0,this.getLiveAnchorWechatInfo(this.form2.liveAnchorId)):this.$toast("请先选择主播IP")},goodsIdClick(){this.form.hospitalDepartmentId?(this.goodsIdModel=!0,this.getAmiyaGoodsDemandLists(this.form2.hospitalDepartmentId)):this.$toast("请先选择科室")},belongEmpIdClick(){this.belongEmpIdModel=!0},getCustomerServiceNameList(){s.nj().then((e=>{this.anchorCustomerServiceMessageParams.serviceNameList=e.data.employee;let t=[];this.anchorCustomerServiceMessageParams.serviceNameList.map((e=>{t.push(e.name)})),this.serviceName=t}))},getAmiyaHospitalDepartmentLists(){s.FZ().then((e=>{this.anchorCustomerServiceMessageParams.departmentList=e.data.AmiyaHospitalDepartmentList;let t=[];this.anchorCustomerServiceMessageParams.departmentList.map((e=>{t.push(e.name)})),this.hospitalDepartmentName=t}))},getAmiyaGoodsDemandLists(e){const t={hospitalDepartmentId:e};s.PR(t).then((e=>{this.anchorCustomerServiceMessageParams.goodsList=e.data.AmiyaGoodsDemandList;let t=[];this.anchorCustomerServiceMessageParams.goodsList.map((e=>{t.push(e.name)})),this.goodsName=t}))},getContentPlatFormValidList(){s.di().then((e=>{this.anchorCustomerServiceMessageParams.terraceList=e.data.contentPalteForms;let t=[];this.anchorCustomerServiceMessageParams.terraceList.map((e=>{t.push(e.name)})),this.terraceName=t}))},getLiveAnchor(e){const t={contentPlatFormId:e};s._v(t).then((e=>{if(this.anchorCustomerServiceMessageParams.LiveAnchorList=e.data.liveAnchors,e.data.liveAnchors==[])return void this.$toast("暂无数据");let t=[];this.anchorCustomerServiceMessageParams.LiveAnchorList.map((e=>{t.push(e.name)})),this.liveAnchorName=t}))},getLiveAnchorWechatInfo(e){const t={liveanchorId:e};s.Rf(t).then((e=>{if(this.anchorCustomerServiceMessageParams.WechatList=e.data.liveAnchorWechatInfos,e.data.liveAnchorWechatInfos==[])return void this.$toast("暂无数据");let t=[];this.anchorCustomerServiceMessageParams.WechatList.map((e=>{t.push(e.name)})),this.liveAnchorWeChatNoName=t}))},onConfirm(e){this.value=e,this.showPicker=!1},belongEmpIdConfirm(e){this.form.belongEmpId=e,this.belongEmpIdModel=!1,this.anchorCustomerServiceMessageParams.serviceNameList.map((t=>{t.name==e&&(this.form2.belongEmpId=t.id)}))},contentPlateFormIdConfirm(e){this.form.contentPlateFormId=e,this.contentPlateFormIdModel=!1,this.form.liveanchorId="",this.form2.liveanchorId="",this.form.liveAnchorWeChatNo=null,this.form2.liveAnchorWeChatNo=null,this.anchorCustomerServiceMessageParams.terraceList.map((t=>{t.name==e&&(this.form2.contentPlateFormId=t.id)}))},liveAnchorIdConfirm(e){this.form.liveAnchorId=e,this.liveAnchorIdModel=!1,this.anchorCustomerServiceMessageParams.LiveAnchorList.map((t=>{t.name==e&&(this.form2.liveAnchorId=t.id)}))},liveAnchorWeChatNoConfirm(e){this.form.liveAnchorWeChatNo=e,this.liveAnchorWeChatNoModel=!1,this.anchorCustomerServiceMessageParams.WechatList.map((t=>{t.name==e&&(this.form2.liveAnchorWeChatNo=t.id)}))},hospitalDepartmentIdConfirm(e){this.form.hospitalDepartmentId=e,this.hospitalDepartmentIdModel=!1,this.anchorCustomerServiceMessageParams.departmentList.map((t=>{t.name==e&&(this.form2.hospitalDepartmentId=t.id)}))},goodsIdConfirm(e){this.form.goodsId=e,this.goodsIdModel=!1,this.anchorCustomerServiceMessageParams.goodsList.map((t=>{t.name==e&&(this.form2.goodsId=t.id)}))}},created(){this.getContentPlatFormValidList(),this.getCustomerServiceNameList(),this.getAmiyaHospitalDepartmentLists();let e=JSON.parse(sessionStorage.getItem("anchorFormName")),t=JSON.parse(sessionStorage.getItem("anchorFormId"));(e||t)&&(this.form.belongEmpId=e.belongEmpId,this.form.contentPlateFormId=e.contentPlateFormId,this.form.liveAnchorId=e.liveAnchorId,this.form.liveAnchorWeChatNo=e.liveAnchorWeChatNo,this.form.hospitalDepartmentId=e.hospitalDepartmentId,this.form.goodsId=e.goodsId,this.form2.belongEmpId=t.belongEmpId,this.form2.contentPlateFormId=t.contentPlateFormId,this.form2.liveAnchorId=t.liveAnchorId,this.form2.liveAnchorWeChatNo=t.liveAnchorWeChatNo,this.form2.hospitalDepartmentId=t.hospitalDepartmentId,this.form2.goodsId=t.goodsId)}}),l=c,m=(o(2303),o(1001)),d=(0,m.Z)(l,a,i,!1,null,"7739bbd2",null),h=d.exports,u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("div",{staticClass:"anchor"},[e._v("订单信息")]),t("div",[t("van-field",{staticClass:"customer_content",attrs:{label:"订单类型",disabled:"",placeholder:"请选择订单类型"},on:{click:function(t){e.model.orderTypeModel=!0}},model:{value:e.form.orderType,callback:function(t){e.$set(e.form,"orderType",t)},expression:"form.orderType"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"定金金额",placeholder:"请输入定金金额",disabled:2!=e.form2.orderType,type:"number"},on:{input:e.depositAmountInput},model:{value:e.form.depositAmount,callback:function(t){e.$set(e.form,"depositAmount",t)},expression:"form.depositAmount"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"预约门店",disabled:"",placeholder:"请选择预约门店"},on:{click:function(t){e.model.appointmentHospitalIdModel=!0}},model:{value:e.form.appointmentHospitalId,callback:function(t){e.$set(e.form,"appointmentHospitalId",t)},expression:"form.appointmentHospitalId"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"订单来源",disabled:"",placeholder:"请选择订单来源"},on:{click:function(t){e.model.orderSourceModel=!0}},model:{value:e.form.orderSource,callback:function(t){e.$set(e.form,"orderSource",t)},expression:"form.orderSource"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"面诊状态",disabled:"",placeholder:"请选择面诊状态"},on:{click:function(t){e.model.consultationTypeModel=!0}},model:{value:e.form.consultationType,callback:function(t){e.$set(e.form,"consultationType",t)},expression:"form.consultationType"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"归属月份",disabled:"",placeholder:"请选择归属月份"},on:{click:function(t){e.model.belongMonthModel=!0}},model:{value:e.form.belongMonth,callback:function(t){e.$set(e.form,"belongMonth",t)},expression:"form.belongMonth"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"下单金额",placeholder:"请输入下单金额",type:"number"},on:{input:e.addOrderPriceInput},model:{value:e.form.addOrderPrice,callback:function(t){e.$set(e.form,"addOrderPrice",t)},expression:"form.addOrderPrice"}})],1),t("div",[t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.model.orderTypeModel,callback:function(t){e.$set(e.model,"orderTypeModel",t)},expression:"model.orderTypeModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list.orderTypesName},on:{cancel:function(t){e.model.orderTypeModel=!1},confirm:e.orderTypeConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.model.orderSourceModel,callback:function(t){e.$set(e.model,"orderSourceModel",t)},expression:"model.orderSourceModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list.orderSourcesName},on:{cancel:function(t){e.model.orderSourceModel=!1},confirm:e.orderSourceConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.model.consultationTypeModel,callback:function(t){e.$set(e.model,"consultationTypeModel",t)},expression:"model.consultationTypeModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list.orderConsultationTypesName},on:{cancel:function(t){e.model.consultationTypeModel=!1},confirm:e.orderConsultationTypesConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.model.belongMonthModel,callback:function(t){e.$set(e.model,"belongMonthModel",t)},expression:"model.belongMonthModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list.belongMonthListName},on:{cancel:function(t){e.model.belongMonthModel=!1},confirm:e.belongMonthListConfirm}})],1),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.model.appointmentHospitalIdModel,callback:function(t){e.$set(e.model,"appointmentHospitalIdModel",t)},expression:"model.appointmentHospitalIdModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list.appointmentHospitalIdName},on:{cancel:function(t){e.model.appointmentHospitalIdModel=!1},confirm:e.appointmentHospitalIdConfirm}})],1)],1),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.prevStep}},[e._v("上一步")]),t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.nextStep}},[e._v("下一步")])],1)])},p=[],f={props:{active:Number,anchorCustomerServiceMessage:Object,message:Object},data(){return{form:{orderType:null,depositAmount:null,appointmentHospitalId:null,orderSource:null,consultationType:null,belongMonth:null,addOrderPrice:null},form2:{orderType:null,depositAmount:null,appointmentHospitalId:null,orderSource:null,consultationType:null,belongMonth:null,addOrderPrice:null},joggle:{orderTypes:[],orderSources:[],orderConsultationTypes:[],belongMonthList:[{id:0,name:"当月"},{id:1,name:"历史"}],hospitalInfo:[]},model:{orderTypeModel:!1,appointmentHospitalIdModel:!1,orderSourceModel:!1,consultationTypeModel:!1,belongMonthModel:!1},list:{orderTypesName:[],orderSourcesName:[],orderConsultationTypesName:[],belongMonthListName:["当月","历史"],appointmentHospitalIdName:[]}}},methods:{prevStep(){this.$emit("edidActive2",{active:0}),sessionStorage.setItem("orderFormName",JSON.stringify(this.form)),sessionStorage.setItem("orderFormId",JSON.stringify(this.form2))},nextStep(){const{orderType:e,depositAmount:t,appointmentHospitalId:o,orderSource:r,consultationType:n,belongMonth:s,addOrderPrice:a}=this.form;e?2!=t?o?r?n?s?a?(this.$emit("edidActive2",{active:2,anchorCustomerServiceMessage:this.form2}),sessionStorage.setItem("orderFormName",JSON.stringify(this.form)),sessionStorage.setItem("orderFormId",JSON.stringify(this.form2))):this.$toast("请输入下单金额"):this.$toast("请选择归属月份"):this.$toast("请选择面诊状态"):this.$toast("请选择订单来源"):this.$toast("请选择预约门店"):this.$toast("请输入定金金额"):this.$toast("请选择订单类型")},getCustomerServiceNameList(){s.yi().then((e=>{this.joggle.orderTypes=e.data.orderTypes;let t=[];this.joggle.orderTypes.map((e=>{t.push(e.name)})),this.list.orderTypesName=t}))},getcontentPlateFormOrderSourceList(){s.rY().then((e=>{this.joggle.orderSources=e.data.orderSources;let t=[];this.joggle.orderSources.map((e=>{t.push(e.name)})),this.list.orderSourcesName=t}))},getOrderConsultationTypeLists(){s.MB().then((e=>{this.joggle.orderConsultationTypes=e.data.orderConsultationTypes;let t=[];this.joggle.orderConsultationTypes.map((e=>{t.push(e.name)})),this.list.orderConsultationTypesName=t}))},getHospitalInfo(){s.a3().then((e=>{this.joggle.hospitalInfo=e.data.hospitalInfo;let t=[];this.joggle.hospitalInfo.map((e=>{t.push(e.name)})),this.list.appointmentHospitalIdName=t}))},orderSourceConfirm(e){this.form.orderSource=e,this.model.orderSourceModel=!1,this.joggle.orderSources.map((t=>{t.name==e&&(this.form2.orderSource=t.id)}))},orderTypeConfirm(e){this.form.orderType=e,this.model.orderTypeModel=!1,this.joggle.orderTypes.map((t=>{t.name==e&&(this.form2.orderType=t.id)}))},orderConsultationTypesConfirm(e){this.form.consultationType=e,this.model.consultationTypeModel=!1,this.joggle.orderConsultationTypes.map((t=>{t.name==e&&(this.form2.consultationType=t.id)}))},belongMonthListConfirm(e){this.form.belongMonth=e,this.model.belongMonthModel=!1,this.form2.belongMonth="当月"==e?0:1},appointmentHospitalIdConfirm(e){this.form.appointmentHospitalId=e,this.model.appointmentHospitalIdModel=!1,this.joggle.hospitalInfo.map((t=>{t.name==e&&(this.form2.appointmentHospitalId=t.id)}))},depositAmountInput(e){this.form.depositAmount=e,this.form2.depositAmount=e},addOrderPriceInput(e){this.form.addOrderPrice=e,this.form2.addOrderPrice=e}},created(){this.getCustomerServiceNameList(),this.getcontentPlateFormOrderSourceList(),this.getOrderConsultationTypeLists(),this.getHospitalInfo();let e=JSON.parse(sessionStorage.getItem("orderFormName")),t=JSON.parse(sessionStorage.getItem("orderFormId"));(e||t)&&(this.form.orderType=e.orderType,this.form.depositAmount=e.depositAmount?e.depositAmount:0,this.form.appointmentHospitalId=e.appointmentHospitalId,this.form.orderSource=e.orderSource,this.form.consultationType=e.consultationType,this.form.belongMonth=e.belongMonth,this.form.addOrderPrice=e.addOrderPrice,this.form2.orderType=t.orderType,this.form2.depositAmount=t.depositAmount?t.depositAmount:0,this.form2.appointmentHospitalId=t.appointmentHospitalId,this.form2.orderSource=t.orderSource,this.form2.consultationType=t.consultationType,this.form2.belongMonth=t.belongMonth,this.form2.addOrderPrice=t.addOrderPrice)}},v=f,b=(o(708),(0,m.Z)(v,u,p,!1,null,"33c80262",null)),g=b.exports,I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("div",{staticClass:"anchor"},[e._v("客户信息")]),t("div",[t("van-field",{staticClass:"customer_content",attrs:{label:"客户昵称",placeholder:"请输入客户昵称"},on:{input:e.customerNameInput},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"手机号",placeholder:"请输入手机号",type:"number",maxlength:"11"},on:{input:e.phoneInput},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"城市",placeholder:"请输入城市"},on:{input:e.cityInput},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"性别",disabled:"",placeholder:"请选择性别"},on:{click:function(t){e.model.sexModel=!0}},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"生日",disabled:"",placeholder:"请选择生日"},on:{click:function(t){e.model.birthdayModel=!0}},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"职业",placeholder:"请输入职业"},on:{input:e.occupationInput},model:{value:e.form.occupation,callback:function(t){e.$set(e.form,"occupation",t)},expression:"form.occupation"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"微信备注",placeholder:"请输入微信备注"},on:{input:e.wechatNumberInput},model:{value:e.form.wechatNumber,callback:function(t){e.$set(e.form,"wechatNumber",t)},expression:"form.wechatNumber"}}),t("div",{staticClass:"customer_img"},[e._v("顾客照片")]),t("div",{staticClass:"img_content"},[e._l(e.form2.imgList,(function(o,r){return t("div",{key:r,staticStyle:{display:"flex"}},[t("div",{staticClass:"img_item"},[o?t("viewer",{attrs:{baseLayerPicker:"true"}},[t("img",{staticClass:"img",attrs:{src:o,alt:""}})]):e._e(),t("span",{staticClass:"opacity_con",on:{click:function(t){return e.deletClick(r)}}},[e._v("x")])],1)])})),e.form2.imgList.length<5?t("van-uploader",{attrs:{"after-read":e.afterReadClick,"max-count":1,"max-size":5242880,"before-read":e.beforeRead},on:{oversize:e.onOversize}}):e._e()],2)],1),t("div",[t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.model.sexModel,callback:function(t){e.$set(e.model,"sexModel",t)},expression:"model.sexModel"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.list.sexListName},on:{cancel:function(t){e.model.sexModel=!1},confirm:e.sexListConfirm}})],1),t("van-calendar",{attrs:{color:"#1989fa","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.onConfirm},model:{value:e.model.birthdayModel,callback:function(t){e.$set(e.model,"birthdayModel",t)},expression:"model.birthdayModel"}})],1),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.prevStep}},[e._v("上一步")]),t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.nextStep}},[e._v("下一步")])],1)])},C=[],x={props:{active:Number,anchorCustomerServiceMessage:Object,message:Object},components:{},data(){return{currentDate:"",minDate:new Date(2020,1,1),maxDate:new Date(2024,1,1),form:{customerName:"",phone:"",sex:"",birthday:"",occupation:"",wechatNumber:"",city:""},form2:{customerName:"",phone:"",sex:"",birthday:"",occupation:"",wechatNumber:"",city:"",imgList:[]},joggle:{},model:{sexModel:!1,birthdayModel:!1},list:{sexListName:["男","女"]}}},methods:{beforeRead(e){return!!/(jpg|jpeg|png|JPG|PNG)/i.test(e.type)||(this.$toast("请上传正确格式的图片！"),!1)},onOversize(e){this.$toast("只能上传5M以内的图片！")},deletClick(e){this.form2.imgList.splice(e,1)},afterReadClick(e){let t=e.file,o=new FormData;o.append("uploadfile",t),s.ws(o).then((e=>{0!=e.code?404!=e.code||this.$toast("上传失败！"):this.form2.imgList.push(e.data.url)}))},prevStep(){this.$emit("edidActive3",{active:1}),sessionStorage.setItem("customerFormName",JSON.stringify(this.form)),sessionStorage.setItem("customerFormId",JSON.stringify(this.form2))},nextStep(){const{customerName:e,phone:t,city:o}=this.form;if(e){if(t)return/^1[3456789]\d{9}$/.test(t)?void(o?(this.$emit("edidActive3",{active:3,anchorCustomerServiceMessage:this.form2}),sessionStorage.setItem("customerFormName",JSON.stringify(this.form)),sessionStorage.setItem("customerFormId",JSON.stringify(this.form2))):this.$toast("请输入城市")):(this.$toast("请输入正确的手机号"),!1);this.$toast("请输入手机号")}else this.$toast("请输入客户昵称")},customerNameInput(e){this.form.customerName=e,this.form2.customerName=e},phoneInput(e){this.form.phone=e,this.form2.phone=e},sexListConfirm(e){this.form.sex=e,this.form2.sex=e,this.model.sexModel=!1},occupationInput(e){this.form.occupation=e,this.form2.occupation=e},wechatNumberInput(e){this.form.wechatNumber=e,this.form2.wechatNumber=e},cityInput(e){this.form.city=e,this.form2.city=e},onConfirm(e){this.form.birthday=this.$moment(e).format("YYYY-MM-DD"),this.form2.birthday=this.$moment(e).format("YYYY-MM-DD"),this.model.birthdayModel=!1}},created(){let e=JSON.parse(sessionStorage.getItem("customerFormName")),t=JSON.parse(sessionStorage.getItem("customerFormId"));(e||t)&&(this.form.customerName=e.customerName,this.form.phone=e.phone,this.form.sex=e.sex,this.form.birthday=e.birthday,this.form.occupation=e.occupation,this.form.wechatNumber=e.wechatNumber,this.form.city=e.city,this.form2.customerName=t.customerName,this.form2.phone=t.phone,this.form2.sex=t.sex,this.form2.birthday=t.birthday,this.form2.occupation=t.occupation,this.form2.wechatNumber=t.wechatNumber,this.form2.city=t.city,this.form2.imgList=t.imgList)}},M=x,S=(o(2560),(0,m.Z)(M,I,C,!1,null,"23b36bf2",null)),y=S.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("div",{staticClass:"anchor"},[e._v("其他内容")]),t("div",[t("van-field",{staticClass:"customer_content",attrs:{label:"咨询内容",placeholder:"请输入咨询内容",type:"textarea",rows:4},on:{input:e.consultingContentInput},model:{value:e.form.consultingContent,callback:function(t){e.$set(e.form,"consultingContent",t)},expression:"form.consultingContent"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"未派单原因",placeholder:"请输入未派单原因",type:"textarea",rows:4},on:{input:e.unSendReasonInput},model:{value:e.form.unSendReason,callback:function(t){e.$set(e.form,"unSendReason",t)},expression:"form.unSendReason"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"后期项目铺垫",placeholder:"请输入后期项目铺垫",type:"textarea",rows:4},on:{input:e.lateProjectStageInput},model:{value:e.form.lateProjectStage,callback:function(t){e.$set(e.form,"lateProjectStage",t)},expression:"form.lateProjectStage"}}),t("van-field",{staticClass:"customer_content",attrs:{label:"备注",placeholder:"请输入备注",type:"textarea",rows:4},on:{input:e.remarkInput},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.prevStep}},[e._v("上一步")]),t("van-button",{staticClass:"button",attrs:{round:"",block:"",type:"info"},on:{click:e.nextStep}},[e._v("完成")])],1)])},A=[],P={props:{active:Number,anchorCustomerServiceMessage:Object,message:Object},data(){return{form:{consultingContent:"",unSendReason:"",lateProjectStage:"",remark:""}}},methods:{prevStep(){this.$emit("edidActive4",{active:2,anchorCustomerServiceMessage:{consultingContent:"",unSendReason:"",lateProjectStage:"",remark:""}}),sessionStorage.setItem("otherForm",JSON.stringify(this.form))},nextStep(){this.$emit("edidActive4",{active:4,anchorCustomerServiceMessage:this.form}),sessionStorage.setItem("otherForm",JSON.stringify(this.form));let e=JSON.parse(sessionStorage.getItem("anchorFormId")),t=JSON.parse(sessionStorage.getItem("orderFormId")),o=JSON.parse(sessionStorage.getItem("customerFormId")),r=JSON.parse(sessionStorage.getItem("otherForm"));const n={belongEmpId:Number(e.belongEmpId),contentPlateFormId:e.contentPlateFormId,goodsId:e.goodsId,hospitalDepartmentId:e.hospitalDepartmentId,liveAnchorId:Number(e.liveAnchorId),liveAnchorWeChatNo:e.liveAnchorWeChatNo,birthday:o.birthday?o.birthday:null,city:o.city,customerName:o.customerName,occupation:o.occupation,phone:o.phone,sex:o.sex,wechatNumber:o.wechatNumber,customerPictures:o.imgList,addOrderPrice:Number(t.addOrderPrice),appointmentHospitalId:Number(t.appointmentHospitalId),belongMonth:Number(t.belongMonth),consultationType:Number(t.consultationType),depositAmount:Number(t.depositAmount),orderSource:Number(t.orderSource),orderType:Number(t.orderType),consultingContent:r.consultingContent,lateProjectStage:r.lateProjectStage,remark:r.remark,unSendReason:r.unSendReason,appointmentDate:null,consultationEmpId:null,acceptConsulting:""};s.o(n).then((e=>{0===e.code?(this.$toast("录单成功"),this.$router.push("/orderList"),sessionStorage.removeItem("anchorFormName"),sessionStorage.removeItem("anchorFormId"),sessionStorage.removeItem("orderFormName"),sessionStorage.removeItem("orderFormId"),sessionStorage.removeItem("customerFormName"),sessionStorage.removeItem("customerFormId"),sessionStorage.removeItem("otherForm")):this.$toast(e.msg)}))},consultingContentInput(e){this.form.consultingContent=e},unSendReasonInput(e){this.form.unSendReason=e},remarkInput(e){this.form.remark=e},lateProjectStageInput(e){this.form.lateProjectStage=e}},created(){let e=JSON.parse(sessionStorage.getItem("otherForm"));e&&(this.form.consultingContent=e.consultingContent,this.form.unSendReason=e.unSendReason,this.form.lateProjectStage=e.lateProjectStage,this.form.remark=e.remark)}},k=P,_=(o(9050),(0,m.Z)(k,N,A,!1,null,"656505f2",null)),F=_.exports,L={components:{anchorCustomerServiceMessage:h,orderMessage:g,customerMessage:y,otherContents:F},data(){return{active:0,message:{anchorCustomerServiceMessage:{},orderMessage:{},customerMessage:{},otherContents:{}}}},methods:{edidActive(e){this.active=e.active,this.message.anchorCustomerServiceMessage=e.anchorCustomerServiceMessage},edidActive2(e){this.active=e.active,0!=e.active?this.message.orderMessage=e.anchorCustomerServiceMessage:this.message.anchorCustomerServiceMessage=e.anchorCustomerServiceMessage},edidActive3(e){this.active=e.active,1!=e.active?this.message.customerMessage=e.anchorCustomerServiceMessage:this.message.orderMessage=e.anchorCustomerServiceMessage},edidActive4(e){this.active=e.active,2!=e.active?this.message.otherContents=e.anchorCustomerServiceMessage:this.message.customerMessage=e.anchorCustomerServiceMessage}},created(){sessionStorage.removeItem("anchorFormName"),sessionStorage.removeItem("anchorFormId"),sessionStorage.removeItem("orderFormName"),sessionStorage.removeItem("orderFormId"),sessionStorage.removeItem("customerFormName"),sessionStorage.removeItem("customerFormId"),sessionStorage.removeItem("otherForm")}},O=L,W=(o(8340),(0,m.Z)(O,r,n,!1,null,"59b8cf54",null)),T=W.exports},5935:function(e,t,o){"use strict";o.r(t);var r=o(8081),n=o.n(r),s=o(3645),a=o.n(s),i=a()(n());i.push([e.id,".content[data-v-7739bbd2]{width:92%;background:#fff;margin:20px auto 0;border-radius:10px;box-shadow:10px 10px 10px rgba(0,.5);padding:10px;box-sizing:border-box}.content .anchor[data-v-7739bbd2]{border-left:3px solid #eacebf;font-size:16px;font-weight:700;padding-left:5px;box-sizing:border-box;height:17px;line-height:17px;color:#5492fe;margin-bottom:10px}.content .customer_content[data-v-7739bbd2]{border-bottom:1px solid #bbd3ff;padding:10px 0;box-sizing:border-box}.content .customer_content .van-field__label[data-v-7739bbd2],.content .customer_content[data-v-7739bbd2] .van-cell__title{width:80px;color:#5492fe}.content .button[data-v-7739bbd2]{width:60%;height:42px;margin:20px auto 0}",""]),t["default"]=i},6938:function(e,t,o){"use strict";o.r(t);var r=o(8081),n=o.n(r),s=o(3645),a=o.n(s),i=a()(n());i.push([e.id,"[data-v-23b36bf2] .van-uploader__upload{width:50px;height:50px}.content[data-v-23b36bf2]{width:92%;background:#fff;margin:20px auto 0;border-radius:10px;box-shadow:10px 10px 10px rgba(0,.5);padding:10px;box-sizing:border-box}.content .img_content[data-v-23b36bf2]{display:flex}.content .img_content .img_item[data-v-23b36bf2]{position:relative;margin-right:5px}.content .img_content .img_item .img[data-v-23b36bf2]{width:50px;height:50px}.content .img_content .img_item .opacity_con[data-v-23b36bf2]{background:#000;position:absolute;right:0;top:0;opacity:.2;padding:1px 4px;box-sizing:border-box;color:#fff}.content .customer_img[data-v-23b36bf2]{font-size:13px;color:#5492fe;margin:10px 0}.content .anchor[data-v-23b36bf2]{border-left:3px solid #eacebf;font-size:16px;font-weight:700;padding-left:5px;box-sizing:border-box;height:17px;line-height:17px;color:#5492fe;margin-bottom:10px}.content .customer_content[data-v-23b36bf2]{border-bottom:1px solid #bbd3ff;padding:10px 0;box-sizing:border-box}.content .customer_content .van-field__label[data-v-23b36bf2],.content .customer_content[data-v-23b36bf2] .van-cell__title{width:70px;color:#5492fe}.content .bottom[data-v-23b36bf2]{display:flex;margin-top:20px}.content .bottom .button[data-v-23b36bf2]{width:40%;height:42px;margin:0 auto}",""]),t["default"]=i},8339:function(e,t,o){"use strict";o.r(t);var r=o(8081),n=o.n(r),s=o(3645),a=o.n(s),i=a()(n());i.push([e.id,".content[data-v-33c80262]{width:92%;background:#fff;margin:20px auto 0;border-radius:10px;box-shadow:10px 10px 10px rgba(0,.5);padding:10px;box-sizing:border-box}.content .anchor[data-v-33c80262]{border-left:3px solid #eacebf;font-size:16px;font-weight:700;padding-left:5px;box-sizing:border-box;height:17px;line-height:17px;color:#5492fe;margin-bottom:10px}.content .customer_content[data-v-33c80262]{border-bottom:1px solid #bbd3ff;padding:10px 0;box-sizing:border-box}.content .customer_content .van-field__label[data-v-33c80262],.content .customer_content[data-v-33c80262] .van-cell__title{width:70px;color:#5492fe}.content .bottom[data-v-33c80262]{display:flex;margin-top:20px}.content .bottom .button[data-v-33c80262]{width:40%;height:42px;margin:0 auto}",""]),t["default"]=i},6100:function(e,t,o){"use strict";o.r(t);var r=o(8081),n=o.n(r),s=o(3645),a=o.n(s),i=a()(n());i.push([e.id,".content[data-v-656505f2]{width:92%;background:#fff;margin:20px auto 20px;border-radius:10px;box-shadow:10px 10px 10px rgba(0,.5);padding:10px;box-sizing:border-box}.content .anchor[data-v-656505f2]{border-left:3px solid #eacebf;font-size:16px;font-weight:700;padding-left:5px;box-sizing:border-box;height:17px;line-height:17px;color:#5492fe;margin-bottom:10px}.content .customer_content[data-v-656505f2]{border-bottom:1px solid #bbd3ff;padding:10px 0;box-sizing:border-box}.content .customer_content .van-field__label[data-v-656505f2],.content .customer_content[data-v-656505f2] .van-cell__title{width:90px;color:#5492fe}.content .bottom[data-v-656505f2]{display:flex;margin-top:20px}.content .bottom .button[data-v-656505f2]{width:40%;height:42px;margin:0 auto 20px}",""]),t["default"]=i},2997:function(e,t,o){"use strict";o.r(t);var r=o(8081),n=o.n(r),s=o(3645),a=o.n(s),i=a()(n());i.push([e.id,".container[data-v-59b8cf54]{width:100%;height:100vh;background:linear-gradient(#8ab4fe,#fff);padding-top:20px;box-sizing:border-box}.container .step_con[data-v-59b8cf54]{width:92%;background:#fff;border-radius:10px;margin:0 auto}",""]),t["default"]=i},7535:function(e,t,o){"use strict";o.d(t,{FZ:function(){return l},IQ:function(){return S},Ir:function(){return P},JP:function(){return k},K2:function(){return N},MB:function(){return u},PR:function(){return m},Pr:function(){return F},Rf:function(){return c},T2:function(){return M},_v:function(){return i},a3:function(){return p},a5:function(){return O},a9:function(){return C},di:function(){return a},jl:function(){return _},ju:function(){return b},k:function(){return I},ks:function(){return L},nj:function(){return s},o:function(){return f},oG:function(){return x},qJ:function(){return A},rY:function(){return h},v1:function(){return y},w5:function(){return v},ws:function(){return n},yi:function(){return d},zo:function(){return g}});var r=o(6809);const n=e=>(0,r.Z)({url:"/fxopenoss/aliyunoss/uploadone",method:"post",data:e}),s=()=>(0,r.Z)({url:"/businessWechat/AmiyaEmployee/customerServiceNameList",method:"get"}),a=()=>(0,r.Z)({url:"/businessWechat/ContentPlatForm/validList",method:"get"}),i=e=>(0,r.Z)({url:"/businessWechat/LiveAnchor/validByContentPlatFormId",method:"get",params:e}),c=e=>(0,r.Z)({url:"/businessWechat/LiveAnchorWechatInfo/validListByLiveAnchorId",method:"get",params:e}),l=()=>(0,r.Z)({url:"/businessWechat/AmiyaHospitalDepartment/getAmiyaHospitalDepartmentList",method:"get"}),m=e=>(0,r.Z)({url:"/businessWechat/AmiyaGoodsDemand/getAmiyaGoodsDemandList",method:"get",params:e}),d=()=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/contentPlateFormOrderTypeList",method:"get"}),h=()=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/contentPlateFormOrderSourceList",method:"get"}),u=()=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/getOrderConsultationTypeList",method:"get"}),p=()=>(0,r.Z)({url:"/businessWechat/HospitalInfo/nameList",method:"get"}),f=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/contentPlateFormAddOrder",method:"post",data:e}),v=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/contentPlateFormOrderLlistWithPage",method:"get",params:e}),b=e=>(0,r.Z)({url:`/businessWechat/ContentPlateFormOrder/byId/${e}`,method:"get"}),g=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/unContentPlatFormSendOrderList",method:"get",params:e}),I=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormSendOrder/list",method:"get",params:e}),C=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder",method:"post",data:e}),x=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/finishContentPlateFormOrderByEmployee",method:"put",data:e}),M=()=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/contentPlateFormOrderToHospitalTypeList",method:"get"}),S=()=>(0,r.Z)({url:"/businessWechat/ContentPlatFormOrderDealInfo/contentPlateFormOrderDealPerformanceType",method:"get"}),y=e=>(0,r.Z)({url:`/businessWechat/ContentPlateFormOrder/byId/${e}`,method:"get"}),N=e=>(0,r.Z)({url:"/businessWechat/ContentPlateFormOrder/updateContentPlateFormOrder",method:"put",data:e}),A=e=>(0,r.Z)({url:"/businessWechat/AmiyaBusinessPerformance/TotalPerformance",method:"get",params:e}),P=e=>(0,r.Z)({url:"/businessWechat/AmiyaBusinessPerformance/PerformanceByLiveAnchorName",method:"get",params:e}),k=e=>(0,r.Z)({url:"/businessWechat/AmiyaBusinessPerformance/hospitalPerformance",method:"get",params:e}),_=e=>(0,r.Z)({url:"/businessWechat/AmiyaBusinessPerformance/customerServicePerformance",method:"get",params:e}),F=e=>(0,r.Z)({url:"/businessWechat/AmiyaBusinessPerformance/customerServiceDetailPerformanceById",method:"get",params:e}),L=e=>(0,r.Z)({url:"/businessWechat/LiveAnchorBaseInfo/valid",method:"get",params:e}),O=e=>(0,r.Z)({url:`/businessWechat/LiveAnchorBaseInfo/byId/${e}`,method:"get"})},2303:function(e,t,o){var r=o(5935);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=o(4402).Z;n("c1b57680",r,!0,{sourceMap:!1,shadowMode:!1})},2560:function(e,t,o){var r=o(6938);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=o(4402).Z;n("415b7416",r,!0,{sourceMap:!1,shadowMode:!1})},708:function(e,t,o){var r=o(8339);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=o(4402).Z;n("e71f1602",r,!0,{sourceMap:!1,shadowMode:!1})},9050:function(e,t,o){var r=o(6100);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=o(4402).Z;n("1a7e2c33",r,!0,{sourceMap:!1,shadowMode:!1})},8340:function(e,t,o){var r=o(2997);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=o(4402).Z;n("84167f5a",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=228.bee907d7.js.map